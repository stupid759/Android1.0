HPHP48-R,*∞
%%%%%%%%%%%%%%%%%%%%%%
%      ANDROID       %
%   by SunHP v1.0    %
%%%%%%%%%%%%%%%%%%%%%%

!OFF
GOSBVL 0679B
GOSBVL 01115
GOSUBL INI-P

GOSUBL çPRE

*LK
GOSUBL GREY
GOSUBL PRESS

% last tests:
?ST=0 2
GOYES ?START
GOLONG GO
*?START
LC 010
GOSBVL 01EEC
?CBIT=0 4
GOYES NSTART
ST=1 2
D0= 00101
C=DAT0 B
D=C B
*NSTART
GOLONG LK

*GO
GOSUBL LEVEL
GOSUBL INI-G

*LCD
GOSUBL ?SOL
GOSUBL TD
GOSUBL TG

GOSUBL ANDRO
GOSUBL çLCD
GOSUBL CLAND
GOSUBL WAIT
GOSUBL TQ
GOTO LCD

*TQ
LC 010
GOSBVL 01EEC
?CBIT=1 0
GOYES QUIT
RTN
*QUIT
D0= 00128
LC 37
DAT0=C B
D0= 0010C
A=DAT0 A
ABIT=1 3
DAT0=A A
D0= 8068D
A=DAT0 A
D0= 00120
DAT0=A A
GOSBVL 067D2
A=DAT0 A
D0=D0+ 5
PC=(A)

*çLCD
D0= 80100
A=DAT0 A
D0=A
D1= 80105
A=DAT1 A
D1=A
LC 87
B=C B

*çç
A=DAT1 W

DAT0=A W
D0=D0+ 16
D1=D1+ 16
B=B-1 B
GONC çç
RTN

*INI-P
CLRST
D0= 0010C
A=DAT0 A
ABIT=0 3
DAT0=A A
LC 3F
D0= 00128
DAT0=C B
LC 01B00
GOSBVL 05B7D
AD0EX
ABIT=0 0
LC 00088
A=A+C A
D0= 80100
DAT0=A A
LC 00880
A=A+C A
D0= 80105 %second
DAT0=A A
GOSUBL CLS-M
D0= 80100
A=DAT0 A
D0= 00120
DAT0=A A
A=0 B
D0= 8010A
DAT0=A B %count
RTN

*GREY
A=0 W
*N1
D0= 00128
A=DAT0 6
?Aã0 W
GOYES N1
D1= 80105
A=DAT1 A
D1=A
GOSUBL AF
A=0 W
*N2
D0= 00128
A=DAT0 6
?Aã0 W
GOYES N2
D1= 80105
A=DAT1 A
LC 00880
A=A+C A
D1=A
GOSUBL AF
A=0 W
*N3
D0= 00128
A=DAT0 6
?Aã0 W
GOYES N3
D1= 80105
A=DAT1 A
LC 00880
A=A+C A
D1=A
GOSUBL AF
RTN

*AF
D0= 80100
A=DAT0 A
D0=A
LC 87
*AFG
A=DAT1 W
DAT0=A W
D0=D0+ 16
D1=D1+ 16
C=C-1 B
GONC AFG
RTN

*çPRE
GOSUBL PRE
$EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF30FFFFFFFFFFFFFFFFFFFFFFFFFF0EFFFF70FFFFFFFFFFFFFFFFFFFFFFFFF70CFFFF70FFFFFFFFFFFFFFFFFFFFFFFFF70CFFFF70FFFFFFFFFFFFFFFFFFFFFFFFF70CFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFF3EF3038700CF7000FFF0EF30E00CF70FFF1EF307870C8F70C0CF34CF10E080E70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFF0EF10E830C0E30E087060F10F081C70FFF0EF10E830E0E306087070F10F081870FFF0CF10EF3060C306083070E107081870FF70CF10CF3060C3060C3030E0070C1870FF70CF00CF3060C1070C1030E0070C1870FF30CF00CD1060C1070C1030E0870C0870FF30CF00CF1070C9070E0030E0870C0870FF30CF108F1030C1030E0830E0870C0870FF10CF108F1030C1000F0830E0830C0870FF10CF108F1030C100870830E0830C0870FF00CF100F0030C10007083060C30E0870FF00CF300F0030E08307081070C3060870FF30CF300F0830E08107081070C3060C70FF30CF300F0810E081070C1070C3060C70F730C7300F0810F081070C1870C1060C70FF30CF700F0810F0C1070C0830C1070E70FF30CF700F081070C1070C0830E1070E70F730C770070C1870C1070C0C30E1030E70F130C360070C1870C0070C0C30E1030F70F130C3E0870C0C70C00F0E0E30E1038F70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70F030C1C1870C0F30E08F168F10F081EF70707081C18300CF30E08F32EF10F008FF70FFFFFFFFFFFFFFFFFFFFF0FFFFFFFFFF70EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF30FFFF444563A2E73DFC888FFF9A651FFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFF775C66526FBDBFD88DF8F8A011FFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFF44F653A6F73DF888EFFFC865DFFF70EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF30EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF30FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFF1EF107870C0F30E0CF168F10E081E70FFF1EF107830C0E30E08F060F10F081C70FFF0EF10E830C0E30E087060F10F081C70FFF0EF10E830E0E306087070F10F081870FFFFFFFFFCFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFCF7FFFFFFFFFFFFFFFFFF7F70FFF3FFFFFDFFFFF7FFEFFFFFFFEFBF3E70FFF1EFF9FDFEF7F7FFFF7EFDFFFF1F7F70FFF1EFF9FD7CFFF1CFFF7EF8FDFFBFFF70FFF3FFFFFFFEFFF7FFBFFFFDFFFFFFDF70FFFFFFFFFFFFFFF7FFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFBFFFEFFFFEFFFDFFDF7FFFFFF70F7FFFFFFFFFFFFFFFFEFFFFFFFFFEF7F70F7FFF7FFFFFFFFFFFFFFFFFFFFFFFFFF70F7FFF7FFFFFF7FFFFFFFFFFFFFFFFFFF70F3BBF3FEEF7F7FFFEFEFEEBFFDFBBFEF70F3B8E3EAAF5D5DFAEBAFAEAE75FBAFAE70F130C360070C1870C0070C0C30E1030F70F130C3E0870C0C70C00F0E0E30E1038F70F130C3E0870C0E70C08F0E0F30E0838F70F030C3C0870C0E70E08F160F10E083CF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF30FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70FFF775555DB6FBDBFDAABFFFEA455FFF70FFF775C66526FBDBFD88DF8F8A011FFF70FFF775F65DA6FBDBFDBBEFFFBA25DFFF70FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF70EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF30
*PRE
C=RSTK
D1=C
D0= 80105
A=DAT0 A
D0=A
LC 87
*COP
A=DAT1 W
DAT0=A W
D0=D0+ 16
D1=D1+ 16
A=DAT1 W
DAT0=A W
D0=D0+ 16
D1=D1+ 16
C=C-1 B
GONC COP
RTN

*PRESS
D0= 8010A
A=DAT0 B
A=A+1 B
DAT0=A B
?ST=1 2
GOYES STARTED
LC 0A
?A<C B
GOYES NX
*STARTED
?ST=1 0
GOYES S1
ST=1 0
A=0 A
DAT0=A A
GOTO NX
*S1
ST=0 0
A=0 B
DAT0=A B
*NX

D0= 80105
A=DAT0 A
LC 00E62
A=A+C A
D0=A
GOSUB ENT
$7E837E0C5A377092580102C2909092580102C290907EC3360ED397701250480243909012504802439090129B370C521790
*ENT
C=RSTK
D1=C
LC 06
?ST=1 0
GOYES CFE
*AFE
A=DAT1 13
DAT0=A 13
D0=D0+ 16
D0=D0+ 16
D0=D0+ 2
D1=D1+ 14
C=C-1 B
GONC AFE
RTN
*CFE
A=0 W
DAT0=A 13
D0=D0+ 16
D0=D0+ 16
D0=D0+ 2
C=C-1 B
GONC CFE
RTN

*LEVEL
GOSUBL CLS-M
D0= 80105
A=DAT0 A
R0=A %ECR
GOSUBL LVL
$00000000000000000000000000000000000000000000000000000000000000000000212223330000000001000000000000000100000222222222222222222222
*LVL
C=RSTK
R1=C %LVL
LC 0F
R2=C %X
LC 07
R3=C %Y

*DRAWL
GOSUB DAT
$000000000000000024E724E724E724E7FF11FF44FF11FF44000000FFFF000000004180E3A2E3A2E3000000000000000000000000000000000000000000000000
*DAT
C=RSTK
D1=C
A=R1 %LVL
D0=A
P= 0
C=0 P

*TST
A=DAT0 P
?A=C P
GOYES DRAW
D1=D1+ 16
C=C+1 P
GOTO TST

*DRAW
A=R0
D0=A
LC 07
*AFD
A=DAT1 B
DAT0=A B
D0=D0+ 16
D0=D0+ 16
D0=D0+ 2
D1=D1+ 2
C=C-1 B
GONC AFD
A=R1
A=A+1 A
R1=A %LVL+1
A=R2
?A=0 B
GOYES Y+
A=A-1 B
R2=A B
A=R0
A=A+2 A
R0=A A
GOTO DRAWL
*Y+
A=R3 B
?A=0 B
GOYES END
A=A-1 B
R3=A B
LC 0F
R2=C B
A=R0
LC 00110
A=A+C A
A=A-16 A
A=A-14 A
R0=A
GOTO DRAWL
*END
RTN

*CLS-M
D0= 80100
A=DAT0 A
D0=A
LC 10F
A=0 W
*CLS
DAT0=A W
D0=D0+ 16
C=C-1 X
GONC CLS
RTN

*ANDRO
GOSUB AND
$00C1C180E3C1416300C1C380E1C3412300C1E180C3E1416200C1C192E3C16103
*AND
C=RSTK
D1=C
A=R0
D0=A
LC 07
*AFA
A=DAT1 B
DAT0=A B
D0=D0+ 16
D0=D0+ 16
D0=D0+ 2
D1=D1+ 2
C=C-1 B
GONC AFA
RTN

*CLAND
A=R0
D0=A
LC 07
A=0 B
*AFC
DAT0=A B
D0=D0+ 16
D0=D0+ 16
D0=D0+ 2
C=C-1 B
GONC AFC
RTN

*INI-G
D0= 80105
A=DAT0 A
R0=A
D0= 8010C %x-and
A=0 B
DAT0=A B
RTN

*?SOL
A=R0
LC 00110
A=A+C A
D0=A
A=DAT0 B
?A=0 B
GOYES CHUTE
RTN
*CHUTE
A=R0
LC 00088
A=A+C A
R0=A
RTN

*TD
LC 080
GOSBVL 01EEC
?CBIT=1 3
GOYES YD
RTN
*YD
D0= 8010C
A=DAT0 B
LC 1E
?AãC B
GOYES NLG
RTN
*NLG
A=A+1 B
DAT0=A B
%test mur a droite
A=R0
A=A+2 A
D0=A
LC 07
P= 0
*TSD
A=DAT0 P
?ABIT=0 0
GOYES NM1
RTN
*NM1
D0=D0+ 16
D0=D0+ 16
D0=D0+ 2
C=C-1 B
GONC TSD
%pas de mur a droite
A=R0
A=A+1 A
R0=A
RTN

*TG
LC 080
GOSBVL 01EEC
?CBIT=1 4
GOYES YG
RTN
*YG
D0= 8010C
A=DAT0 B
?Aã0 B
GOYES NLD
RTN
*NLD
A=A-1 B
DAT0=A B
%test mur a gauche
A=R0
A=A-1 A
R0=A
RTN

*WAIT
LC 01000
*WW
C=C-1 A
GONC WW
RTN

@